function isNumber(t){t=(t=t||window.event).which||t.keyCode;return!(31<t&&(t<48||57<t))}function investBack(){window.localStorage.setItem("investConfirmPreviousUrl",document.URL),window.history.back()}function makePayment(){return new Promise(function(e,n){var t=$("#cardNumber").val().trim(),a=$("#month").val().trim(),i=$("#year").val().trim(),r=$("#cvc").val().trim(),o=$("#token").val().trim();$("#stripeError").html(""),t&&a&&i&&r&&$.ajax({type:"POST",url:makePaymentUrl,data:{_token:o,cardNumber:t,month:a,year:i,cvc:r},dataType:"json",beforeSend:function(t){$("#investment-stripe-submit-btn").attr("disabled",!0)}}).done(function(t){return 200!=t.data.status?($("#stripeError").html(t.data.message),$("#investment-stripe-submit-btn").attr("disabled",!0),n(t.data.status),!1):(e(t.data),void $("#investment-stripe-submit-btn").attr("disabled",!1))})})}function confirmPayment(){makePayment().then(function(t){var e=$("#token").val().trim();$.ajax({type:"POST",url:confirmPaymentUrl,data:{_token:e,paymentIntendId:t.paymentIntendId,paymentMethodId:t.paymentMethodId},dataType:"json",beforeSend:function(t){$("#investment-stripe-submit-btn").attr("disabled",!0),$(".fa-spin").show(),$("#investment-stripe-submit-btn-txt").text(submitButtonText)}}).done(function(t){return $("#investment-stripe-submit-btn-txt").text(pretext),$(".fa-spin").hide(),200!=t.data.status?($("#investment-stripe-submit-btn").attr("disabled",!0),$("#stripeError").html(t.data.message),void 0===t.data.investment&&null===t.data.investment||setTimeout(function(){window.location.replace(investUrl)},3e3),!1):($("#investment-stripe-submit-btn").attr("disabled",!1),void window.location.replace(SITE_URL+"/investment/success/"+t.data.investId))})})}var paymentIntendId,paymentMethodId;$(".main-containt").find("#invest_stripe").length&&(paymentMethodId=paymentIntendId=null,$(document).on("click",".invest-confirm-back-btn",function(t){t.preventDefault(),investBack()}),$("#month").change(function(){$("#investment-stripe-submit-btn").attr("disabled",!0),makePayment()}),$("#year, #cvc").on("keyup",$.debounce(500,function(){$("#investment-stripe-submit-btn").attr("disabled",!0),makePayment()})),$("#cardNumber").on("keyup",$.debounce(1e3,function(){$("#investment-stripe-submit-btn").attr("disabled",!0),makePayment()})),document.getElementById("cardNumber").addEventListener("input",function(t){var e=t.target,n=e.selectionEnd,t=e.value.length;e.value=e.value.replace(/[^\d]/g,"").replace(/(.{4})/g,"$1 ").trim(),e.selectionEnd=n+=" "===e.value.charAt(n-1)&&" "===e.value.charAt(t-1)&&t!==e.value.length?1:0}),$(document).ready(function(){$("#investment-stripe-submit-btn").attr("disabled",!0),window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)}}),$(document).on("submit","#payment-form",function(t){t.preventDefault(),$(".spinner").removeClass("d-none"),$("#invest-money-text").text(submitButtonText),confirmPayment()})),$(".main-containt").find("#invest_paypal").length&&paypal.Buttons({createOrder:function(t,e){return e.order.create({purchase_units:[{amount:{value:amount}}]})},onApprove:function(t,e){return e.order.capture().then(function(t){window.location.replace(successUrl)})}}).render("#paypal-button-container"),$(".main-content").find("#invest_payeer").length&&$("#payeer-submit-button").trigger("click"),$(".main-content").find("#invest_payumoney").length&&$("#payumoney-submit-button").trigger("click");