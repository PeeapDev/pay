"use strict";function restrictNumberToPrefdecimalOnInput(t,n){var n=$("#investment-plan option:selected").data("currency-type");restrictNumberToPrefdecimal(t,n)}if($(".main-containt").find("#invest_add").length){function t(){return new Promise(function(t,n){var e=$("#investment-plan").val(),a=investmentPlan?$("#investment-plan").data("currency"):$("#investment-plan option:selected").data("currency");null!=e&&$.ajax({method:"GET",url:paymentMethodUrl,data:{plan_id:e,plan_currency_id:a},dataType:"json"}).done(function(n){let e="";$.map(n.data.paymentMethods,function(t,n){e+=`<option value="${t.id}">${t.name}</option>`}),""!=n.data.paymentMethods?(t(200),$("#payment-method-div, #invest-money-btn").removeClass("d-none"),$("#payment-method").html(e),$("#empty-payment").addClass("d-none")):(t(404),$("#empty-payment").removeClass("d-none"),$("#payment-method-div, #invest-money-btn").addClass("d-none"))}).fail(function(t){Swal.fire(failedText,JSON.parse(t.responseText).message,"error").then(t=>{t.isConfirmed&&window.location.reload()}),n()})})}function n(){var t=investmentPlan?$("#investment-plan").data("type"):$("#investment-plan option:selected").data("type"),n=investmentPlan?$("#investment-plan").data("amount"):$("#investment-plan option:selected").data("amount"),e=investmentPlan?$("#investment-plan").data("currency-code"):$("#investment-plan option:selected").data("currency-code"),a=investmentPlan?$("#investment-plan").data("currency-type"):$("#investment-plan option:selected").data("currency-type"),o=investmentPlan?$("#investment-plan").data("maximum-amount"):$("#investment-plan option:selected").data("maximum-amount");$.ajax({method:"GET",url:currencyTypeUrl,dataType:"json",data:{currencyType:a,amount:n,maximum_amount:o}}).done(function(n){$(".currency").text("("+e+")").show(),"Fixed"==t?($("#amount-limit-div").addClass("d-none"),$("#amount").val(n.data.amount).prop("readonly",!0).show(),$("#amount-range, #maximum-amount").hide()):($("#amount-limit-div").removeClass("d-none"),$("#amount").val("").show().prop("readonly",!1),$("#amount-range").text(minAmount+" - "+n.data.amount+" "+e).show(),$("#maximum-amount").text(maxAmount+" - "+n.data.maximumAmount+" "+e).show())})}function e(){var t=$("#amount").val(),n=$("#token").val(),e=investmentPlan?$("#investment-plan").data("type"):$("#investment-plan option:selected").data("type"),a=investmentPlan?$("#investment-plan").data("amount"):$("#investment-plan option:selected").data("amount"),o=investmentPlan?$("#investment-plan").data("maximum-amount"):$("#investment-plan option:selected").data("maximum-amount"),m=investmentPlan?$("#investment-plan").val():$("#investment-plan option:selected").val(),i=$("#payment-method option:selected").text(),s=investmentPlan?$("#investment-plan").data("payment-methods"):$("#investment-plan option:selected").data("payment-methods");$.ajax({method:"POST",url:amountLimitUrl,dataType:"json",data:{_token:n,user_amount:t,amount:a,plan_type:e,plan_id:m,maximum_amount:o,payment_method:i,payment_methods:s,transaction_type_id:transactionTypeId}}).done(function(n){200==n.success.status?("Range"==e?($("#amount-limit-div").removeClass("d-none"),$("#amount-range, #maximum-amount").show()):($("#amount-limit-div").addClass("d-none"),$("#amount-range, #maximum-amount").hide()),$(".amountLimit").text(""),$("#invest-money-btn").attr("disabled",!1)):""==t&&"Range"==e?($("#amount-limit-div").removeClass("d-none"),$(".amountLimit").text(""),$("#amount-range, #maximum-amount").show(),$("#invest-money-btn").attr("disabled",!1)):($("#amount-limit-div").addClass("d-none"),$("#amount-range, #maximum-amount").hide(),$(".amountLimit").text(n.success.message),i.includes("wallet")&&$(".amountLimit").text(n.success.balanceLimitError),$("#invest-money-btn").attr("disabled",!0))})}function a(){let t;if(SITE_URL+"/invest/create"==localStorage.getItem("investConfirmPreviousUrl")){let n=localStorage.getItem("investPaymentMethodId"),e=localStorage.getItem("amount"),a=localStorage.getItem("planId");n&&e&&a&&(swal(waitText.replace(/&#039;/g,"'"),loadingText,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1}),setTimeout(function(t,n,e){$("#investment-plan").val(e),$("#amount").val(n),$("#payment-method").val(t),$("#payment-method").trigger("change"),swal.close()},1300,n,e,a),o())}else setTimeout(function(){o()},1300)}function o(){localStorage.removeItem("investPaymentMethodId"),localStorage.removeItem("amount"),localStorage.removeItem("planId"),localStorage.removeItem("investConfirmPreviousUrl")}$(window).on("load",function(){a(),n(),t().then(t=>{200==t&&e()}).catch(t=>{Swal.fire(failedText,JSON.parse(t.responseText).message,"error").then(t=>{t.isConfirmed&&window.location.reload()})})}),$("#investment-plan").on("change",function(){n(),t().then(t=>{200==t&&e()}).catch(t=>{Swal.fire(failedText,JSON.parse(t.responseText).message,"error").then(t=>{t.isConfirmed&&window.location.reload()})})}),$(document).on("keyup",".amount",$.debounce(1e3,function(){t().then(t=>{200==t&&e()}).catch(t=>{Swal.fire(failedText,JSON.parse(t.responseText).message,"error").then(t=>{t.isConfirmed&&window.location.reload()})})})),$(document).on("change","#payment-method",function(){e()}),$(document).on("submit","#invest-form",function(){$("#invest-money-btn").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#invest-money-btn-text").text(investSubmitButtonText);var t=$("#payment-method").val();localStorage.setItem("investPaymentMethodId",t);var n=$("#amount").val();localStorage.setItem("amount",n);var e=$("#investment-plan").val();localStorage.setItem("planId",e),setTimeout(function(){$(".spinner").addClass("d-none"),$("#invest-money-btn").attr("disabled",!1),$("#invest-money-btn-text").text(pretext)},2e3)})}if($(".main-containt").find("#invest_confirm").length){function m(){window.localStorage.setItem("investConfirmPreviousUrl",SITE_URL+"/invest/create"),window.history.back()}$(document).on("click",".deposit-confirm-back-btn",function(t){t.preventDefault(),m()}),$(document).on("submit","#confirm-form",function(){$("#confirm-button").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#confirm-button-text").text(continueButtonText)})}if($(".main-containt").find("#invest_success").length){function i(t){116==(t.which||t.keyCode)&&t.preventDefault()}function s(t){82==t.keyCode&&t.ctrlKey&&t.preventDefault()}$(document).ready(function(){window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)}}),$(document).ready(function(){$(document).on("keydown",i)}),$(document).ready(function(){$(document).on("keydown",s)})}$(".main-containt").find("#invest_list").length&&$(document).on("change","#status",function(){let t=SITE_URL+"/investment-list/"+$(this).val();window.location.href=t});