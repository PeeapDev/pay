"use strict";var currentCurrencyType,lastCurrencyType;function restrictNumberToPrefdecimalOnInput(e){restrictNumberToPrefdecimal(e,$("#currency-id").find(":selected").attr("data-type"))}function determineDecimalPoint(){"fiat"==$("select#currency-id").find(":selected").data("type")?($("#amount").attr("placeholder",FIATDP),$("#maximum-amount").attr("placeholder",FIATDP)):($("#amount").attr("placeholder",CRYPTODP),$("#maximum-amount").attr("placeholder",CRYPTODP))}function getTermArray(e){let t=[];return"Year"==e&&(t=["Yearly","Monthly","Weekly","Daily","Hourly"]),"Month"==e&&(t=["Monthly","Weekly","Daily","Hourly"]),"Week"==e&&(t=["Weekly","Daily","Hourly"]),"Day"==e&&(t=["Daily","Hourly"]),"Hour"==e&&(t=["Hourly"]),t}function changeTerm(){$("#interest-time-frame").empty();let e,t=getTermArray($("#term-type").val());if(""!=t)for(e in t)$("#interest-time-frame").append("<option>"+t[e]+"</option>")}function convertToSlug(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function maximum_amount(e){"Range"==e?$("#maximum-amount-div").show():"Fixed"==e&&$("#maximum-amount-div").css("display","none")}function enableDisableBtn(e,t){$("."+e).text(t),$("#investment-plan-add-submit-btn").attr("disabled",!0),$("#investment-plan-edit-submit-btn").attr("disabled",!0)}function checkAmountMaxAmountInterestRate(){var e=$("#amount").val(),t=$("#interest-rate").val(),n=$("#maximum-amount").val();$(".interest-rate").text(" "),$(".maximum-amount").text(" "),$("#investment-plan-add-submit-btn").attr("disabled",!1),$("#investment-plan-edit-submit-btn").attr("disabled",!1),n.length>0?(e.length>0&&t.length>0&&parseFloat(t)>parseFloat(e)&&enableDisableBtn("interest-rate",interestRateError),e.length>0&&n.length>0&&parseFloat(e)>=parseFloat(n)&&enableDisableBtn("maximum-amount",maxAmountError)):e.length>0&&t.length>0&&parseFloat(t)>parseFloat(e)&&enableDisableBtn("interest-rate",interestRateError)}function checkMaxInvestLimitAndMaxLimitInvestor(){var e=$("#maximum-investors").val(),t=$("#maximum-limit-for-investor").val();$(".investor-limit").text(" "),$("#investment-plan-add-submit-btn").attr("disabled",!1),$("#investment-plan-edit-submit-btn").attr("disabled",!1),e.length>0&&t.length>0&&parseFloat(t)>parseFloat(e)&&enableDisableBtn("investor-limit",investorError)}function getPaymentMethods(){var e=$("#currency-id option:selected").val();$.ajax({method:"GET",url:paymentMethodUrl,dataType:"json",data:{currency_id:e}}).done(function(e){var t="";200==e.data.status&&$.map(e.data.paymentMethods,function(e){t+=`<option value="${e.id}">${"Mts"==e.name?"Wallet":e.name}</option>`}),$("#payment-methods").html(t)})}if($(function(){$(".payment").select2({})}),$("#maximum-investors, #maximum-limit-for-investor, #term").keypress(function(e){var t=e.which;t>=48&&t<=57||e.preventDefault()}),$("#name").on("input",function(){var e=$("#name").val();if(""!=e){$(".url").css("display","none");var e=convertToSlug($(this).val());$(".url").text(url+"/"+e)}else $(".url").css("display","none")}),$("#amount, #maximum-amount, #interest-rate").on("change",function(){checkAmountMaxAmountInterestRate()}),$("#maximum-investors, #maximum-limit-for-investor").on("change",function(){checkMaxInvestLimitAndMaxLimitInvestor()}),$(document).on("click","select",function(){lastCurrencyType=$(this).find(":selected").data("type")}),$("#currency-id").on("change",function(){lastCurrencyType!==(currentCurrencyType=$("#currency-id").find(":selected").data("type"))&&($("#amount").val(""),$("#maximum-amount").val("")),$("#currency-type").val(currentCurrencyType),determineDecimalPoint(),getPaymentMethods()}),$("#investment-type").on("change",function(){maximum_amount($(this).find("option:selected").val())}),$(".content").find("#plan_add").length&&($(window).on("load",function(){determineDecimalPoint(),getPaymentMethods();let e=$("#currency-id").find(":selected").data("type");$("#currency-type").val(e);let t,n=getTermArray($("#term-type").find("option:selected").val());for(t in n)$("#interest-time-frame").append("<option>"+n[t]+"</option>");maximum_amount($("#investment-type").find("option:selected").val())}),$(document).on("submit","#add-investment-plan-form",function(){$(".fa-spinner").removeClass("d-none"),$("#investment-plan-add-submit-btn").attr("disabled",!0),$("#investment-plan-add-submit-btn-text").text(submitButtonText)})),$(".content").find("#plan_edit").length){$(document).ready(function(){var e=paymentMethods.split(",");$("#payment-methods").select2({placeholder:selectedPaymentMethodText,allowClear:!0}).select2().val(e).trigger("change")});"Yes"==$("#is-featured").val()&&$("#featured").prop("checked",!0).change();"Yes"==$("#withdraw-after-matured").val()&&$("#withdrawal-term").prop("checked",!0).change(),$(window).on("load",function(){determineDecimalPoint();let e=$("#currency-id").find(":selected").data("type");$("#currency-type").val(e),maximum_amount($("#investment-type").find("option:selected").val()),$("#interest-time-frame").empty();let t,n=getTermArray($("#term-type").find("option:selected").val());for(t in n)$("#interest-time-frame").append("<option "+(selectedProfitAdjust==n[t]?"selected":"")+">"+n[t]+"</option>")}),$(document).on("submit","#edit-investment-plan-form",function(){$("#investment-plan-edit-submit-btn").attr("disabled",!0),$(".fa-spinner").removeClass("d-none"),$("#investment-plan-edit-submit-btn-text").text(updateButtonText)})}$(document).ready(function(){$(".planInactive, .planActive").on("click",function(e){var t=$(this).attr("data-id"),n=$(this).attr("data-status");e.preventDefault(),Swal.fire({title:alertTitle,icon:"warning",width:600,allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:alertConfirm,cancelButtonText:alertCancel}).then(e=>{e.isConfirmed&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:{status:n,id:t},url:statusChangeUrl}).done(function(e){Swal.fire(e.title,e.message,e.alert).then(e=>{e.isConfirmed&&window.location.reload()})}).fail(function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error").then(e=>{e.isConfirmed&&window.location.reload()})})})}),$(".delete").on("click",function(e){var t=$(this).attr("data-id");e.preventDefault(),Swal.fire({title:alertTitle,text:alertText,icon:"warning",width:600,allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:deleteConfirm,cancelButtonText:alertCancel}).then(e=>{e.isConfirmed&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"GET",dataType:"JSON",data:{ajax:!0},url:ADMIN_URL+"/investment-plan/delete/"+t}).done(function(e){Swal.fire(e.title,e.message,e.alert).then(e=>{e.isConfirmed&&window.location.reload()})}).fail(function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error").then(e=>{e.isConfirmed&&window.location.reload()})})})}),$("#list, #grid").on("click",function(e){var t=$(this).attr("data-view");e.preventDefault(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:{view:t},url:viewChangeUrl,beforeSend:function(){swal(waitText.replace(/&#039;/g,"'"),LoadingText,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1})}}).done(function(e){setTimeout(function(){swal.close(),window.location.reload()},1e3)}).fail(function(e){swal.close(),Swal.fire(failedText,JSON.parse(e.responseText).message,"error").then(e=>{e.isConfirmed&&window.location.reload()})})})});