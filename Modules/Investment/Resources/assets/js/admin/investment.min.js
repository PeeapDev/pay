"use strict";var sDate,eDate;$(".select2").select2({}),$(".content").find("#investment_list").length&&($("#daterange-btn").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment().subtract(29,"days"),endDate:moment()},function(t,e){var n=sessionDate.toUpperCase();sDate=moment(t,"MMMM D, YYYY").format(n),eDate=moment(e,"MMMM D, YYYY").format(n),$("#startfrom").val(sDate),$("#endto").val(eDate),$("#daterange-btn span").html("&nbsp;"+sDate+" - "+eDate)}),$(document).ready(function(){$("#daterange-btn").mouseover(function(){$(this).css("background-color","white"),$(this).css("border-color","grey !important")}),""==startDate?$("#daterange-btn span").html('<i class="fa fa-calendar"></i> &nbsp;&nbsp;'+dateRange):$("#daterange-btn span").html(startDate+" - "+endDate),$("#user_input").on("keyup keypress",function(t){"keyup"!=t.type&&"keypress"!=t.type||0===$("form").find("input[type='text']").val().length&&($("#user_id").val(""),$("#error-user").html(""),$("form").find("button[type='submit']").prop("disabled",!1))}),$("#user_input").autocomplete({source:function(t,e){0<t.term.length?$.ajax({url:url,dataType:"json",type:"get",data:{search:t.term},success:function(t){$("form").find("button[type='submit']").prop("disabled",!0),"success"==t.status?e($.map(t.data,function(t){return{id:t.user_id,first_name:t.first_name,last_name:t.last_name,value:t.first_name+" "+t.last_name}})):"fail"==t.status&&$("#error-user").addClass("text-danger").html(userError)}}):$("#user_id").val("")},select:function(t,e){e=e.item;$("#error-user").html(""),$("#user_id").val(e.id),$("form").find("button[type='submit']").prop("disabled",!1)},minLength:0,autoFocus:!0})}),$(document).ready(function(){$("#csv").on("click",function(t){t.preventDefault(),window.location=ADMIN_URL+"/investments/csv?startfrom="+$("#startfrom").val()+"&endto="+$("#endto").val()+"&status="+$("#status").val()+"&currency="+$("#currency").val()+"&payment_methods="+$("#payment_methods").val()+"&user_id="+$("#user_id").val()}),$("#pdf").on("click",function(t){t.preventDefault(),window.location=ADMIN_URL+"/investments/pdf?startfrom="+$("#startfrom").val()+"&endto="+$("#endto").val()+"&status="+$("#status").val()+"&currency="+$("#currency").val()+"&payment_methods="+$("#payment_methods").val()+"&user_id="+$("#user_id").val()}),$("#approve").on("click",function(t){t.preventDefault(),Swal.fire({title:alertTitle,text:alertText,icon:"warning",width:600,allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:alertConfirm,cancelButtonText:alertCancel}).then(t=>{t.isConfirmed&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:approveUrl,beforeSend:function(){swal(waitText.replace(/&#039;/g,"'"),waitingText,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1})}}).done(function(e){swal.close(),Swal.fire(e.title,e.message,e.alert).then(t=>{t.isConfirmed&&("verification needed"==e.alert?window.location.href=ADMIN_URL+"/addon/verify/SU5WRVNUTUVOVF9TRUNSRVQ=":window.location.reload())})}).fail(function(t){swal.close(),Swal.fire(failedText,JSON.parse(t.responseText).message,"error").then(t=>{t.isConfirmed&&window.location.reload()})})})})})),$(".content").find("#investment_detail").length&&$("#approve, #cancel").on("click",function(t){t.preventDefault();var e=$(this).attr("data-id"),n=$(this).attr("data-status");Swal.fire({title:alertTitle,icon:"warning",width:600,allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:alertConfirm,cancelButtonText:alertCancel}).then(t=>{t.isConfirmed&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:url,data:{id:e,transaction_type:"Investment",status:n,user_id:userId,currency_id:currencyId,ajax:!0},beforeSend:function(){swal(waitText.replace(/&#039;/g,"'"),waitingText,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1})}}).done(function(e){swal.close(),Swal.fire(e.title,e.message,e.alert).then(t=>{t.isConfirmed&&("verification needed"==e.alert?window.location.href=ADMIN_URL+"/addon/verify/SU5WRVNUTUVOVF9TRUNSRVQ=":window.location.reload())})}).fail(function(t){swal.close(),Swal.fire(failedText,JSON.parse(t.responseText).message,"error").then(t=>{t.isConfirmed&&window.location.reload()})})})});